{% extends "base.html" %}
{% block title %}Početna stranica{% endblock %}

{% block head %}
{{ super() }}
<style>
    .recept-naziv {
        font-weight: bold;
    }
    .badge-category {
        background-color: #ff7043;
    }
</style>
{% endblock %}

{% block body %}

<h2 class="mb-4">Najnoviji recepti</h2>

{% if recepti %}
    <ul class="list-unstyled">
        {% for recept in recepti %}
        <li class="mb-5">
            <h3 class="recept-naziv">
                <a href="{{ url_for('recept_view', recept_id=recept['_id']) }}" class="text-dark text-decoration-none">
                    {{ recept['title'] }}
                </a>
            </h3>

            {% if recept.get('slika_id') %}
            <img src="{{ url_for('serve_image', image_id=recept['slika_id']) }}" class="img-fluid mb-3" alt="Slika recepta">
            {% endif %}

            <p>
                <strong>Autor:</strong> {{ recept['user_id'] }}
                – {{ recept['datum'].strftime('%d.%m.%Y') if recept.get('datum') else '' }}
            </p>

            {% if recept.get('tags') %}
            <p class="mt-2">
                {% for tag in recept['tags'].split(',') %}
                <span class="badge bg-primary">{{ tag.strip() }}</span>
                {% endfor %}
            </p>
            {% endif %}

            {% if recept.get('description') %}
            <p>{{ recept['description'] }}</p>
            {% endif %}

            <hr>
        </li>
        {% endfor %}
    </ul>
{% else %}
    <p>Trenutno nema recepata.</p>
{% endif %}

{% endblock %}
